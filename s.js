{let c=chrome,n=c.webNavigation,b=n.onBeforeNavigate,m=n.onCommitted,p=c.action,a=()=>(b.addListener(f,{url:[{hostEquals:"www.google.com",queryContains:"?q="}]}),m.removeListener(a)),f=v=>{b.removeListener(f),m.addListener(a),v=new URL(v.url);let i=3;while(v.searchParams.delete(["gs_lcrp","ie","sourceid"][--i]),i);c.tabs.update({url: v.href})},t=0;p.onClicked.addListener(()=>c.declarativeNetRequest.updateEnabledRulesets(t?(p.setIcon({path:"on.png"}),t=0,{disableRulesetIds:["0"]}):(p.setIcon({path:"off.png"}),t=1,b.removeListener(f),m.removeListener(a),{enableRulesetIds:["0"]}))),a()}